table:
    name: gate_open
    schema: public
object_relationships:
    -   name: gate
        using:
            foreign_key_constraint_on: gate_id
    -   name: person
        using:
            manual_configuration:
                column_mapping:
                    source: phone
                insertion_order: null
                remote_table:
                    name: person
                    schema: public
    -   name: person_by_email
        using:
            manual_configuration:
                column_mapping:
                    source: email
                insertion_order: null
                remote_table:
                    name: person
                    schema: public
    -   name: person_by_telegram
        using:
            manual_configuration:
                column_mapping:
                    source: telegram_id
                insertion_order: null
                remote_table:
                    name: person
                    schema: public
    -   name: reason
        using:
            foreign_key_constraint_on: reason_id
select_permissions:
    -   permission:
            allow_aggregations: true
            columns:
                - id
                - gate_id
                - reason_id
                - source
                - comment
                - created_at
            filter: { }
        role: government
event_triggers:
    -   definition:
            enable_manual: false
            insert:
                columns: "*"
        headers:
            -   name: x-hasura-event-secret
                value_from_env: HASURA_EVENT_SECRET
        name: gate_open
        retry_conf:
            interval_sec: 10
            num_retries: 0
            timeout_sec: 60
        webhook: https://workflow.astra50.ru/webhook/gate-open
